schema: '2.0'
stages:
  load_data:
    cmd: python src\S01_load_data.py
    deps:
    - path: data\remote\winequality-red.csv
      hash: md5
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: modules\data_loader.py
      hash: md5
      md5: 88ac80c43f76670f2bab6f93350ee195
      size: 747
    - path: modules\logger_configurator.py
      hash: md5
      md5: e286601c2c429c503afaff8df14eefd6
      size: 513
    - path: src\S01_load_data.py
      hash: md5
      md5: 8074dfd63e43ba8ff425af81efa21439
      size: 699
    outs:
    - path: data\raw\winequality-red.csv
      hash: md5
      md5: 919e9477c64f61c85f5c54628774b327
      size: 95085
  clean_data:
    cmd: python src\S02_clean_data.py
    deps:
    - path: data\raw\winequality-red.csv
      hash: md5
      md5: 919e9477c64f61c85f5c54628774b327
      size: 95085
    - path: modules\data_loader.py
      hash: md5
      md5: 88ac80c43f76670f2bab6f93350ee195
      size: 747
    - path: modules\logger_configurator.py
      hash: md5
      md5: e286601c2c429c503afaff8df14eefd6
      size: 513
    - path: src\S02_clean_data.py
      hash: md5
      md5: 2d292f73ca3df54a16120e5cb59b3186
      size: 1158
    outs:
    - path: data\cleansed\winequality-red.csv
      hash: md5
      md5: cd1722c2bc71d34217daf5764c84afe5
      size: 98283
  transform_data:
    cmd: python src\S03_transform_data.py
    deps:
    - path: data\cleansed\winequality-red.csv
      hash: md5
      md5: cd1722c2bc71d34217daf5764c84afe5
      size: 98283
    - path: modules\data_loader.py
      hash: md5
      md5: 88ac80c43f76670f2bab6f93350ee195
      size: 747
    - path: modules\logger_configurator.py
      hash: md5
      md5: e286601c2c429c503afaff8df14eefd6
      size: 513
    - path: src\S03_transform_data.py
      hash: md5
      md5: 4dfa818a3097a6e4bc27f16578a2bf95
      size: 3881
    outs:
    - path: data\transformed\X\winequality-red.csv
      hash: md5
      md5: 412f6302f2c901cb344b808ffdbe3755
      size: 90873
    - path: data\transformed\y\winequality-red.csv
      hash: md5
      md5: f99ab6519c78d9e17dca9640630c8f22
      size: 9010
  model_training_and_evaluate:
    cmd: python src\S04_model_training_and_evaluate.py --config=params.yaml
    deps:
    - path: modules\data_loader.py
      hash: md5
      md5: 88ac80c43f76670f2bab6f93350ee195
      size: 747
    - path: modules\logger_configurator.py
      hash: md5
      md5: e286601c2c429c503afaff8df14eefd6
      size: 513
    - path: params.yaml
      hash: md5
      md5: 69b1c8de5600d8e86ac4df65b12b5f12
      size: 2297
    - path: src\S04_model_training_and_evaluate.py
      hash: md5
      md5: 244a248b43a2df41ccd0a5b47778e81e
      size: 4280
    params:
      params.yaml:
        model.GradientBoostingRegressor.params.learning_rate: 0.09441984528708666
        model.GradientBoostingRegressor.params.n_estimators: 185
        model.Lasso.params.alpha: 1.001098452866197e-05
        model.Ridge.params.alpha: 3.306264699556261e-05
        model.SVR.params.C: 0.999599271154472
        model.SVR.params.kernel: linear
    outs:
    - path: model_artifacts\saved_models
      hash: md5
      md5: 5e351c5580a73da5322276243dc63374.dir
      size: 453320
      nfiles: 5
    - path: report\metrics.json
      hash: md5
      md5: 6801727855c9e6d8735c38cafc8cad56
      size: 920
    - path: report\params.json
      hash: md5
      md5: a60101c27b02e454324460adab4677e9
      size: 809
  model_to_prediction_service:
    cmd: python  src\S05_model_to_prediction_service.py
    deps:
    - path: modules\logger_configurator.py
      hash: md5
      md5: e286601c2c429c503afaff8df14eefd6
      size: 513
    - path: modules\read_config.py
      hash: md5
      md5: 51609abfd1a81335e6409ee2dac3a8fd
      size: 182
    - path: params.yaml
      hash: md5
      md5: 69b1c8de5600d8e86ac4df65b12b5f12
      size: 2297
    - path: src\S05_model_to_prediction_service.py
      hash: md5
      md5: bbede33f0a56d769bc2e9f0f54a007fb
      size: 2536
    outs:
    - path: prediction_app\prediction_resources\scaler
      hash: md5
      md5: c33d0afdf117df9f78b87e48c6bdd9bc.dir
      size: 1433
      nfiles: 2
    - path: prediction_app\prediction_resources\serving_models\
      hash: md5
      md5: 0d728bf3de5f28702bacf1659f26a29e.dir
      size: 340127
      nfiles: 1
  logging_production_model:
    cmd: python src/S06_logging_production_model.py --config=params.yaml
    deps:
    - path: src/S06_logging_production_model.py
      hash: md5
      md5: 5655cdb21e77a85cb4aa3b516df31ad9
      size: 3617
